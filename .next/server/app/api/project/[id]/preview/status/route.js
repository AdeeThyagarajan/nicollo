"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/project/[id]/preview/status/route";
exports.ids = ["app/api/project/[id]/preview/status/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&page=%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&page=%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_adhiththyagarajan_Desktop_Nicollo_nicollo_app_api_project_id_preview_status_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/project/[id]/preview/status/route.ts */ \"(rsc)/./app/api/project/[id]/preview/status/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/project/[id]/preview/status/route\",\n        pathname: \"/api/project/[id]/preview/status\",\n        filename: \"route\",\n        bundlePath: \"app/api/project/[id]/preview/status/route\"\n    },\n    resolvedPagePath: \"/Users/adhiththyagarajan/Desktop/Nicollo/nicollo/app/api/project/[id]/preview/status/route.ts\",\n    nextConfigOutput,\n    userland: _Users_adhiththyagarajan_Desktop_Nicollo_nicollo_app_api_project_id_preview_status_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/project/[id]/preview/status/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9qZWN0JTJGJTVCaWQlNUQlMkZwcmV2aWV3JTJGc3RhdHVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9qZWN0JTJGJTVCaWQlNUQlMkZwcmV2aWV3JTJGc3RhdHVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvamVjdCUyRiU1QmlkJTVEJTJGcHJldmlldyUyRnN0YXR1cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFkaGl0aHRoeWFnYXJhamFuJTJGRGVza3RvcCUyRk5pY29sbG8lMkZuaWNvbGxvJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFkaGl0aHRoeWFnYXJhamFuJTJGRGVza3RvcCUyRk5pY29sbG8lMkZuaWNvbGxvJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM2QztBQUMxSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25pY29sbG8tdjEvP2Q3ODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2FkaGl0aHRoeWFnYXJhamFuL0Rlc2t0b3AvTmljb2xsby9uaWNvbGxvL2FwcC9hcGkvcHJvamVjdC9baWRdL3ByZXZpZXcvc3RhdHVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9qZWN0L1tpZF0vcHJldmlldy9zdGF0dXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9qZWN0L1tpZF0vcHJldmlldy9zdGF0dXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2plY3QvW2lkXS9wcmV2aWV3L3N0YXR1cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hZGhpdGh0aHlhZ2FyYWphbi9EZXNrdG9wL05pY29sbG8vbmljb2xsby9hcHAvYXBpL3Byb2plY3QvW2lkXS9wcmV2aWV3L3N0YXR1cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvamVjdC9baWRdL3ByZXZpZXcvc3RhdHVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&page=%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/project/[id]/preview/status/route.ts":
/*!******************************************************!*\
  !*** ./app/api/project/[id]/preview/status/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_sandbox_paths__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/sandbox/paths */ \"(rsc)/./lib/sandbox/paths.ts\");\n/* harmony import */ var _lib_sandbox_meta__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/sandbox/meta */ \"(rsc)/./lib/sandbox/meta.ts\");\n// app/api/project/[id]/preview/status/route.ts\nconst runtime = \"nodejs\";\n/**\n * Preview Status (source of truth for the Workspace preview overlay)\n *\n * Goals:\n * - Never expose raw simulators/emulators.\n * - UI only shows: \"Preview loadingâ€¦\", \"Preview running\", \"Preview error (retry)\".\n * - For V1:\n *   - Web preview is served by /preview/[id] which supports:\n *       1) static bundle: current/index.html + current/asset/*\n *       2) Vite bundles: apps/web/dist, dist, frontend/dist\n *   - Mobile preview is ONLY for shared_mobile (Expo) via Expo web export (dist/ or web-build/).\n */ \n\n\n\n\n\nfunction safeTrim(v) {\n    return typeof v === \"string\" ? v.trim() : \"\";\n}\nfunction fileExists(p) {\n    try {\n        return fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(p) && fs__WEBPACK_IMPORTED_MODULE_1___default().statSync(p).isFile();\n    } catch  {\n        return false;\n    }\n}\nfunction dirExists(p) {\n    try {\n        return fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(p) && fs__WEBPACK_IMPORTED_MODULE_1___default().statSync(p).isDirectory();\n    } catch  {\n        return false;\n    }\n}\nfunction readJsonIfExists(p) {\n    try {\n        if (!fileExists(p)) return null;\n        return JSON.parse(fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(p, \"utf-8\"));\n    } catch  {\n        return null;\n    }\n}\n/**\n * WEB preview is considered \"running\" if ANY of these are present,\n * because /preview/[id] can serve them:\n * - current/index.html (preferred V1 static preview)\n * - apps/web/dist/index.html\n * - dist/index.html\n * - frontend/dist/index.html\n */ function webPreviewIndexPath(root) {\n    const p1 = path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"index.html\");\n    if (fileExists(p1)) return p1;\n    const p2 = path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"apps\", \"web\", \"dist\", \"index.html\");\n    if (fileExists(p2)) return p2;\n    const p3 = path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"dist\", \"index.html\");\n    if (fileExists(p3)) return p3;\n    const p4 = path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"frontend\", \"dist\", \"index.html\");\n    if (fileExists(p4)) return p4;\n    return null;\n}\n/**\n * For some Vite projects, dist might not exist yet.\n * We attempt builds in common locations (apps/web, root, frontend),\n * but we DO NOT try to \"next build\" here.\n *\n * (Next.js preview bundles are expected to be written as current/index.html + asset/* by your runner.)\n */ function isNextJsProject(root) {\n    const pkg = readJsonIfExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"package.json\"));\n    if (!pkg) return false;\n    const deps = {\n        ...pkg.dependencies || {},\n        ...pkg.devDependencies || {}\n    };\n    return typeof deps.next === \"string\" || fileExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"next.config.js\"));\n}\nfunction previewPort(projectId) {\n    const n = parseInt(projectId, 10);\n    const base = 4300;\n    const offset = Number.isFinite(n) ? n % 700 : 0;\n    return base + offset;\n}\nasync function waitForHttp(url, msTotal = 8000) {\n    const start = Date.now();\n    while(Date.now() - start < msTotal){\n        try {\n            const r = await fetch(url, {\n                cache: \"no-store\"\n            });\n            if (r.ok || r.status === 404) return true;\n        } catch  {\n        // ignore\n        }\n        await new Promise((res)=>setTimeout(res, 250));\n    }\n    return false;\n}\nasync function ensureNextDevServer(root, projectId) {\n    const port = previewPort(projectId);\n    const baseUrl = `http://127.0.0.1:${port}`;\n    const running = await waitForHttp(baseUrl, 600);\n    if (running) return {\n        ok: true,\n        port,\n        baseUrl\n    };\n    try {\n        const nodeModules = path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"node_modules\");\n        if (!dirExists(nodeModules)) {\n            (0,child_process__WEBPACK_IMPORTED_MODULE_3__.execSync)(\"npm install\", {\n                cwd: root,\n                stdio: \"ignore\",\n                timeout: 240000\n            });\n        }\n    } catch  {\n    // ignore\n    }\n    try {\n        const child = (0,child_process__WEBPACK_IMPORTED_MODULE_3__.spawn)(process.platform === \"win32\" ? \"npx.cmd\" : \"npx\", [\n            \"next\",\n            \"dev\",\n            \"-p\",\n            String(port),\n            \"-H\",\n            \"127.0.0.1\"\n        ], {\n            cwd: root,\n            stdio: \"ignore\",\n            detached: true,\n            env: {\n                ...process.env,\n                PORT: String(port),\n                HOSTNAME: \"127.0.0.1\",\n                HOST: \"127.0.0.1\"\n            }\n        });\n        child.unref();\n    } catch  {\n    // ignore\n    }\n    const ok = await waitForHttp(baseUrl, 8000);\n    return {\n        ok,\n        port,\n        baseUrl\n    };\n}\nfunction tryBuildViteIfPossible(appRoot) {\n    if (!dirExists(appRoot)) return;\n    const distIndex = path__WEBPACK_IMPORTED_MODULE_2___default().join(appRoot, \"dist\", \"index.html\");\n    if (fileExists(distIndex)) return;\n    const pkg = readJsonIfExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(appRoot, \"package.json\"));\n    if (!pkg) return;\n    const scripts = pkg.scripts || {};\n    if (typeof scripts.build !== \"string\") return;\n    const nodeModules = path__WEBPACK_IMPORTED_MODULE_2___default().join(appRoot, \"node_modules\");\n    try {\n        if (!dirExists(nodeModules)) {\n            (0,child_process__WEBPACK_IMPORTED_MODULE_3__.execSync)(\"npm install\", {\n                cwd: appRoot,\n                stdio: \"ignore\",\n                timeout: 180000\n            });\n        }\n        (0,child_process__WEBPACK_IMPORTED_MODULE_3__.execSync)(\"npm run build\", {\n            cwd: appRoot,\n            stdio: \"ignore\",\n            timeout: 180000\n        });\n    } catch  {\n    // ignore - status will return error if preview still missing\n    }\n}\nfunction findExpoRoot(root) {\n    const candidates = [\n        path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"apps\", \"mobile\"),\n        path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"apps\", \"native\"),\n        root\n    ];\n    try {\n        const entries = fs__WEBPACK_IMPORTED_MODULE_1___default().readdirSync(root, {\n            withFileTypes: true\n        });\n        for (const e of entries){\n            if (!e.isDirectory()) continue;\n            candidates.push(path__WEBPACK_IMPORTED_MODULE_2___default().join(root, e.name));\n        }\n    } catch  {\n    // ignore\n    }\n    const looksLikeExpo = (dir)=>{\n        const pkg = readJsonIfExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(dir, \"package.json\"));\n        if (!pkg) return false;\n        const deps = {\n            ...pkg.dependencies || {},\n            ...pkg.devDependencies || {}\n        };\n        const hasExpo = typeof deps.expo === \"string\";\n        const hasRN = typeof deps[\"react-native\"] === \"string\";\n        const hasAppConfig = fileExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(dir, \"app.json\")) || fileExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(dir, \"app.config.js\")) || fileExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(dir, \"app.config.ts\"));\n        return (hasExpo || hasRN) && hasAppConfig;\n    };\n    for (const c of candidates){\n        if (looksLikeExpo(c)) return c;\n    }\n    return null;\n}\nfunction expoWebIndexPath(expoRoot) {\n    const d1 = path__WEBPACK_IMPORTED_MODULE_2___default().join(expoRoot, \"dist\", \"index.html\");\n    if (fileExists(d1)) return d1;\n    const d2 = path__WEBPACK_IMPORTED_MODULE_2___default().join(expoRoot, \"web-build\", \"index.html\");\n    if (fileExists(d2)) return d2;\n    return null;\n}\nfunction tryExpoWebExportIfPossible(expoRoot) {\n    if (expoWebIndexPath(expoRoot)) return;\n    const pkg = readJsonIfExists(path__WEBPACK_IMPORTED_MODULE_2___default().join(expoRoot, \"package.json\"));\n    if (!pkg) return;\n    const scripts = pkg.scripts || {};\n    const nodeModules = path__WEBPACK_IMPORTED_MODULE_2___default().join(expoRoot, \"node_modules\");\n    const run = (cmd)=>(0,child_process__WEBPACK_IMPORTED_MODULE_3__.execSync)(cmd, {\n            cwd: expoRoot,\n            stdio: \"ignore\",\n            timeout: 240000\n        });\n    try {\n        if (!dirExists(nodeModules)) {\n            (0,child_process__WEBPACK_IMPORTED_MODULE_3__.execSync)(\"npm install\", {\n                cwd: expoRoot,\n                stdio: \"ignore\",\n                timeout: 240000\n            });\n        }\n        // Prefer explicit scripts if present\n        if (typeof scripts[\"export:web\"] === \"string\") {\n            run(\"npm run export:web\");\n            return;\n        }\n        if (typeof scripts[\"build:web\"] === \"string\") {\n            run(\"npm run build:web\");\n            return;\n        }\n        if (typeof scripts[\"export\"] === \"string\") {\n            run(\"npm run export\");\n            return;\n        }\n        // Fallback to Expo CLI export\n        run(\"npx expo export --platform web --output-dir dist\");\n    } catch  {\n    // ignore - status will return error if preview still missing\n    }\n}\nasync function GET(req, { params }) {\n    const projectId = params.id;\n    (0,_lib_sandbox_paths__WEBPACK_IMPORTED_MODULE_4__.ensureDirs)(projectId);\n    const root = (0,_lib_sandbox_paths__WEBPACK_IMPORTED_MODULE_4__.currentDir)(projectId);\n    const meta = (0,_lib_sandbox_meta__WEBPACK_IMPORTED_MODULE_5__.readMeta)(projectId);\n    const url = new URL(req.url);\n    const requested = safeTrim(url.searchParams.get(\"platform\")).toLowerCase();\n    const buildPlatform = meta?.buildInfo?.platform || \"web\";\n    // UI may request ios/android for framing even if the underlying preview is web-exported.\n    const platform = requested === \"web\" || requested === \"ios\" || requested === \"android\" || requested === \"ios_android\" ? requested : buildPlatform;\n    if (!meta?.built) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            state: \"loading\",\n            message: \"Project not built yet\"\n        });\n    }\n    // WEB\n    if (platform === \"web\") {\n        // If static preview bundle exists, we are running.\n        if (webPreviewIndexPath(root)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                state: \"running\"\n            });\n        }\n        // Attempt Vite builds (safe, non-nextjs).\n        tryBuildViteIfPossible(path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"apps\", \"web\"));\n        tryBuildViteIfPossible(root);\n        tryBuildViteIfPossible(path__WEBPACK_IMPORTED_MODULE_2___default().join(root, \"frontend\"));\n        if (webPreviewIndexPath(root)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                state: \"running\"\n            });\n        }\n        // If this is a Next.js project, we can still provide a live preview by starting a local Next dev server\n        // and proxying it through /preview/:id/next/*\n        if (isNextJsProject(root)) {\n            const started = await ensureNextDevServer(root, projectId);\n            if (started.ok) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    state: \"running\",\n                    mode: \"next-dev\",\n                    nextPort: started.port,\n                    directUrl: started.baseUrl\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                state: \"error\",\n                message: \"Next.js preview failed to start.\"\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            state: \"error\",\n            message: \"Web preview not found (preview output missing).\"\n        });\n    }\n    // MOBILE (Expo/shared_mobile only; delivered via web export)\n    const framework = meta?.buildInfo?.framework || \"\";\n    if (framework !== \"shared_mobile\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            state: \"error\",\n            message: \"Mobile preview is only supported for Expo/shared_mobile projects in this version.\"\n        });\n    }\n    const expoRoot = findExpoRoot(root);\n    if (!expoRoot) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            state: \"error\",\n            message: \"Could not locate an Expo project in the sandbox.\"\n        });\n    }\n    tryExpoWebExportIfPossible(expoRoot);\n    const idx = expoWebIndexPath(expoRoot);\n    if (idx) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            state: \"running\"\n        });\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        state: \"error\",\n        message: \"Expo web preview not found (export output missing).\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2plY3QvW2lkXS9wcmV2aWV3L3N0YXR1cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLCtDQUErQztBQUN4QyxNQUFNQSxVQUFVLFNBQVM7QUFFaEM7Ozs7Ozs7Ozs7O0NBV0MsR0FFMEM7QUFDdkI7QUFDSTtBQUN3QjtBQUVhO0FBQ2Y7QUFLOUMsU0FBU1MsU0FBU0MsQ0FBTTtJQUN0QixPQUFPLE9BQU9BLE1BQU0sV0FBV0EsRUFBRUMsSUFBSSxLQUFLO0FBQzVDO0FBRUEsU0FBU0MsV0FBV0MsQ0FBUztJQUMzQixJQUFJO1FBQ0YsT0FBT1gsb0RBQWEsQ0FBQ1csTUFBTVgsa0RBQVcsQ0FBQ1csR0FBR0csTUFBTTtJQUNsRCxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVBLFNBQVNDLFVBQVVKLENBQVM7SUFDMUIsSUFBSTtRQUNGLE9BQU9YLG9EQUFhLENBQUNXLE1BQU1YLGtEQUFXLENBQUNXLEdBQUdLLFdBQVc7SUFDdkQsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFQSxTQUFTQyxpQkFBaUJOLENBQVM7SUFDakMsSUFBSTtRQUNGLElBQUksQ0FBQ0QsV0FBV0MsSUFBSSxPQUFPO1FBQzNCLE9BQU9PLEtBQUtDLEtBQUssQ0FBQ25CLHNEQUFlLENBQUNXLEdBQUc7SUFDdkMsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Ozs7OztDQU9DLEdBQ0QsU0FBU1Usb0JBQW9CQyxJQUFZO0lBQ3ZDLE1BQU1DLEtBQUt0QixnREFBUyxDQUFDcUIsTUFBTTtJQUMzQixJQUFJWixXQUFXYSxLQUFLLE9BQU9BO0lBRTNCLE1BQU1FLEtBQUt4QixnREFBUyxDQUFDcUIsTUFBTSxRQUFRLE9BQU8sUUFBUTtJQUNsRCxJQUFJWixXQUFXZSxLQUFLLE9BQU9BO0lBRTNCLE1BQU1DLEtBQUt6QixnREFBUyxDQUFDcUIsTUFBTSxRQUFRO0lBQ25DLElBQUlaLFdBQVdn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SUFFQSxPQUFPcEgscURBQVlBLENBQUNtSCxJQUFJLENBQUM7UUFDdkJDLE9BQU87UUFDUEMsU0FBUztJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaWNvbGxvLXYxLy4vYXBwL2FwaS9wcm9qZWN0L1tpZF0vcHJldmlldy9zdGF0dXMvcm91dGUudHM/NzA1MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL3Byb2plY3QvW2lkXS9wcmV2aWV3L3N0YXR1cy9yb3V0ZS50c1xuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xuXG4vKipcbiAqIFByZXZpZXcgU3RhdHVzIChzb3VyY2Ugb2YgdHJ1dGggZm9yIHRoZSBXb3Jrc3BhY2UgcHJldmlldyBvdmVybGF5KVxuICpcbiAqIEdvYWxzOlxuICogLSBOZXZlciBleHBvc2UgcmF3IHNpbXVsYXRvcnMvZW11bGF0b3JzLlxuICogLSBVSSBvbmx5IHNob3dzOiBcIlByZXZpZXcgbG9hZGluZ+KAplwiLCBcIlByZXZpZXcgcnVubmluZ1wiLCBcIlByZXZpZXcgZXJyb3IgKHJldHJ5KVwiLlxuICogLSBGb3IgVjE6XG4gKiAgIC0gV2ViIHByZXZpZXcgaXMgc2VydmVkIGJ5IC9wcmV2aWV3L1tpZF0gd2hpY2ggc3VwcG9ydHM6XG4gKiAgICAgICAxKSBzdGF0aWMgYnVuZGxlOiBjdXJyZW50L2luZGV4Lmh0bWwgKyBjdXJyZW50L2Fzc2V0LypcbiAqICAgICAgIDIpIFZpdGUgYnVuZGxlczogYXBwcy93ZWIvZGlzdCwgZGlzdCwgZnJvbnRlbmQvZGlzdFxuICogICAtIE1vYmlsZSBwcmV2aWV3IGlzIE9OTFkgZm9yIHNoYXJlZF9tb2JpbGUgKEV4cG8pIHZpYSBFeHBvIHdlYiBleHBvcnQgKGRpc3QvIG9yIHdlYi1idWlsZC8pLlxuICovXG5cbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGV4ZWNTeW5jLCBzcGF3biB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5cbmltcG9ydCB7IGVuc3VyZURpcnMsIGN1cnJlbnREaXIgfSBmcm9tIFwiQC9saWIvc2FuZGJveC9wYXRoc1wiO1xuaW1wb3J0IHsgcmVhZE1ldGEgfSBmcm9tIFwiQC9saWIvc2FuZGJveC9tZXRhXCI7XG5cbnR5cGUgUHJldmlld1N0YXRlID0gXCJsb2FkaW5nXCIgfCBcInJ1bm5pbmdcIiB8IFwiZXJyb3JcIjtcbnR5cGUgUGxhdGZvcm0gPSBcIndlYlwiIHwgXCJpb3NcIiB8IFwiYW5kcm9pZFwiIHwgXCJpb3NfYW5kcm9pZFwiO1xuXG5mdW5jdGlvbiBzYWZlVHJpbSh2OiBhbnkpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSBcInN0cmluZ1wiID8gdi50cmltKCkgOiBcIlwiO1xufVxuXG5mdW5jdGlvbiBmaWxlRXhpc3RzKHA6IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBmcy5leGlzdHNTeW5jKHApICYmIGZzLnN0YXRTeW5jKHApLmlzRmlsZSgpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlyRXhpc3RzKHA6IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBmcy5leGlzdHNTeW5jKHApICYmIGZzLnN0YXRTeW5jKHApLmlzRGlyZWN0b3J5KCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkSnNvbklmRXhpc3RzKHA6IHN0cmluZyk6IGFueSB8IG51bGwge1xuICB0cnkge1xuICAgIGlmICghZmlsZUV4aXN0cyhwKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHAsIFwidXRmLThcIikpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFdFQiBwcmV2aWV3IGlzIGNvbnNpZGVyZWQgXCJydW5uaW5nXCIgaWYgQU5ZIG9mIHRoZXNlIGFyZSBwcmVzZW50LFxuICogYmVjYXVzZSAvcHJldmlldy9baWRdIGNhbiBzZXJ2ZSB0aGVtOlxuICogLSBjdXJyZW50L2luZGV4Lmh0bWwgKHByZWZlcnJlZCBWMSBzdGF0aWMgcHJldmlldylcbiAqIC0gYXBwcy93ZWIvZGlzdC9pbmRleC5odG1sXG4gKiAtIGRpc3QvaW5kZXguaHRtbFxuICogLSBmcm9udGVuZC9kaXN0L2luZGV4Lmh0bWxcbiAqL1xuZnVuY3Rpb24gd2ViUHJldmlld0luZGV4UGF0aChyb290OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgcDEgPSBwYXRoLmpvaW4ocm9vdCwgXCJpbmRleC5odG1sXCIpO1xuICBpZiAoZmlsZUV4aXN0cyhwMSkpIHJldHVybiBwMTtcblxuICBjb25zdCBwMiA9IHBhdGguam9pbihyb290LCBcImFwcHNcIiwgXCJ3ZWJcIiwgXCJkaXN0XCIsIFwiaW5kZXguaHRtbFwiKTtcbiAgaWYgKGZpbGVFeGlzdHMocDIpKSByZXR1cm4gcDI7XG5cbiAgY29uc3QgcDMgPSBwYXRoLmpvaW4ocm9vdCwgXCJkaXN0XCIsIFwiaW5kZXguaHRtbFwiKTtcbiAgaWYgKGZpbGVFeGlzdHMocDMpKSByZXR1cm4gcDM7XG5cbiAgY29uc3QgcDQgPSBwYXRoLmpvaW4ocm9vdCwgXCJmcm9udGVuZFwiLCBcImRpc3RcIiwgXCJpbmRleC5odG1sXCIpO1xuICBpZiAoZmlsZUV4aXN0cyhwNCkpIHJldHVybiBwNDtcblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBGb3Igc29tZSBWaXRlIHByb2plY3RzLCBkaXN0IG1pZ2h0IG5vdCBleGlzdCB5ZXQuXG4gKiBXZSBhdHRlbXB0IGJ1aWxkcyBpbiBjb21tb24gbG9jYXRpb25zIChhcHBzL3dlYiwgcm9vdCwgZnJvbnRlbmQpLFxuICogYnV0IHdlIERPIE5PVCB0cnkgdG8gXCJuZXh0IGJ1aWxkXCIgaGVyZS5cbiAqXG4gKiAoTmV4dC5qcyBwcmV2aWV3IGJ1bmRsZXMgYXJlIGV4cGVjdGVkIHRvIGJlIHdyaXR0ZW4gYXMgY3VycmVudC9pbmRleC5odG1sICsgYXNzZXQvKiBieSB5b3VyIHJ1bm5lci4pXG4gKi9cblxuXG5mdW5jdGlvbiBpc05leHRKc1Byb2plY3Qocm9vdDogc3RyaW5nKSB7XG4gIGNvbnN0IHBrZyA9IHJlYWRKc29uSWZFeGlzdHMocGF0aC5qb2luKHJvb3QsIFwicGFja2FnZS5qc29uXCIpKTtcbiAgaWYgKCFwa2cpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgZGVwcyA9IHsgLi4uKHBrZy5kZXBlbmRlbmNpZXMgfHwge30pLCAuLi4ocGtnLmRldkRlcGVuZGVuY2llcyB8fCB7fSkgfTtcbiAgcmV0dXJuIHR5cGVvZiBkZXBzLm5leHQgPT09IFwic3RyaW5nXCIgfHwgZmlsZUV4aXN0cyhwYXRoLmpvaW4ocm9vdCwgXCJuZXh0LmNvbmZpZy5qc1wiKSk7XG59XG5cbmZ1bmN0aW9uIHByZXZpZXdQb3J0KHByb2plY3RJZDogc3RyaW5nKSB7XG4gIGNvbnN0IG4gPSBwYXJzZUludChwcm9qZWN0SWQsIDEwKTtcbiAgY29uc3QgYmFzZSA9IDQzMDA7XG4gIGNvbnN0IG9mZnNldCA9IE51bWJlci5pc0Zpbml0ZShuKSA/IChuICUgNzAwKSA6IDA7XG4gIHJldHVybiBiYXNlICsgb2Zmc2V0O1xufVxuXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9ySHR0cCh1cmw6IHN0cmluZywgbXNUb3RhbCA9IDgwMDApIHtcbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICB3aGlsZSAoRGF0ZS5ub3coKSAtIHN0YXJ0IDwgbXNUb3RhbCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsLCB7IGNhY2hlOiBcIm5vLXN0b3JlXCIgfSk7XG4gICAgICBpZiAoci5vayB8fCByLnN0YXR1cyA9PT0gNDA0KSByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGlnbm9yZVxuICAgIH1cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgMjUwKSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVOZXh0RGV2U2VydmVyKHJvb3Q6IHN0cmluZywgcHJvamVjdElkOiBzdHJpbmcpIHtcbiAgY29uc3QgcG9ydCA9IHByZXZpZXdQb3J0KHByb2plY3RJZCk7XG4gIGNvbnN0IGJhc2VVcmwgPSBgaHR0cDovLzEyNy4wLjAuMToke3BvcnR9YDtcblxuICBjb25zdCBydW5uaW5nID0gYXdhaXQgd2FpdEZvckh0dHAoYmFzZVVybCwgNjAwKTtcbiAgaWYgKHJ1bm5pbmcpIHJldHVybiB7IG9rOiB0cnVlLCBwb3J0LCBiYXNlVXJsIH07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBub2RlTW9kdWxlcyA9IHBhdGguam9pbihyb290LCBcIm5vZGVfbW9kdWxlc1wiKTtcbiAgICBpZiAoIWRpckV4aXN0cyhub2RlTW9kdWxlcykpIHtcbiAgICAgIGV4ZWNTeW5jKFwibnBtIGluc3RhbGxcIiwgeyBjd2Q6IHJvb3QsIHN0ZGlvOiBcImlnbm9yZVwiLCB0aW1lb3V0OiAyNDBfMDAwIH0pO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNoaWxkID0gc3Bhd24ocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gXCJ3aW4zMlwiID8gXCJucHguY21kXCIgOiBcIm5weFwiLCBbXCJuZXh0XCIsIFwiZGV2XCIsIFwiLXBcIiwgU3RyaW5nKHBvcnQpLCBcIi1IXCIsIFwiMTI3LjAuMC4xXCJdLCB7XG4gICAgICBjd2Q6IHJvb3QsXG4gICAgICBzdGRpbzogXCJpZ25vcmVcIixcbiAgICAgIGRldGFjaGVkOiB0cnVlLFxuICAgICAgZW52OiB7IC4uLnByb2Nlc3MuZW52LCBQT1JUOiBTdHJpbmcocG9ydCksIEhPU1ROQU1FOiBcIjEyNy4wLjAuMVwiLCBIT1NUOiBcIjEyNy4wLjAuMVwiIH0sXG4gICAgfSk7XG4gICAgY2hpbGQudW5yZWYoKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cblxuICBjb25zdCBvayA9IGF3YWl0IHdhaXRGb3JIdHRwKGJhc2VVcmwsIDgwMDApO1xuICByZXR1cm4geyBvaywgcG9ydCwgYmFzZVVybCB9O1xufVxuXG5mdW5jdGlvbiB0cnlCdWlsZFZpdGVJZlBvc3NpYmxlKGFwcFJvb3Q6IHN0cmluZykge1xuICBpZiAoIWRpckV4aXN0cyhhcHBSb290KSkgcmV0dXJuO1xuXG4gIGNvbnN0IGRpc3RJbmRleCA9IHBhdGguam9pbihhcHBSb290LCBcImRpc3RcIiwgXCJpbmRleC5odG1sXCIpO1xuICBpZiAoZmlsZUV4aXN0cyhkaXN0SW5kZXgpKSByZXR1cm47XG5cbiAgY29uc3QgcGtnID0gcmVhZEpzb25JZkV4aXN0cyhwYXRoLmpvaW4oYXBwUm9vdCwgXCJwYWNrYWdlLmpzb25cIikpO1xuICBpZiAoIXBrZykgcmV0dXJuO1xuXG4gIGNvbnN0IHNjcmlwdHMgPSBwa2cuc2NyaXB0cyB8fCB7fTtcbiAgaWYgKHR5cGVvZiBzY3JpcHRzLmJ1aWxkICE9PSBcInN0cmluZ1wiKSByZXR1cm47XG5cbiAgY29uc3Qgbm9kZU1vZHVsZXMgPSBwYXRoLmpvaW4oYXBwUm9vdCwgXCJub2RlX21vZHVsZXNcIik7XG4gIHRyeSB7XG4gICAgaWYgKCFkaXJFeGlzdHMobm9kZU1vZHVsZXMpKSB7XG4gICAgICBleGVjU3luYyhcIm5wbSBpbnN0YWxsXCIsIHsgY3dkOiBhcHBSb290LCBzdGRpbzogXCJpZ25vcmVcIiwgdGltZW91dDogMTgwXzAwMCB9KTtcbiAgICB9XG4gICAgZXhlY1N5bmMoXCJucG0gcnVuIGJ1aWxkXCIsIHsgY3dkOiBhcHBSb290LCBzdGRpbzogXCJpZ25vcmVcIiwgdGltZW91dDogMTgwXzAwMCB9KTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlIC0gc3RhdHVzIHdpbGwgcmV0dXJuIGVycm9yIGlmIHByZXZpZXcgc3RpbGwgbWlzc2luZ1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRFeHBvUm9vdChyb290OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgY2FuZGlkYXRlczogc3RyaW5nW10gPSBbcGF0aC5qb2luKHJvb3QsIFwiYXBwc1wiLCBcIm1vYmlsZVwiKSwgcGF0aC5qb2luKHJvb3QsIFwiYXBwc1wiLCBcIm5hdGl2ZVwiKSwgcm9vdF07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBlbnRyaWVzID0gZnMucmVhZGRpclN5bmMocm9vdCwgeyB3aXRoRmlsZVR5cGVzOiB0cnVlIH0pO1xuICAgIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWUuaXNEaXJlY3RvcnkoKSkgY29udGludWU7XG4gICAgICBjYW5kaWRhdGVzLnB1c2gocGF0aC5qb2luKHJvb3QsIGUubmFtZSkpO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cblxuICBjb25zdCBsb29rc0xpa2VFeHBvID0gKGRpcjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGtnID0gcmVhZEpzb25JZkV4aXN0cyhwYXRoLmpvaW4oZGlyLCBcInBhY2thZ2UuanNvblwiKSk7XG4gICAgaWYgKCFwa2cpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBkZXBzID0geyAuLi4ocGtnLmRlcGVuZGVuY2llcyB8fCB7fSksIC4uLihwa2cuZGV2RGVwZW5kZW5jaWVzIHx8IHt9KSB9O1xuICAgIGNvbnN0IGhhc0V4cG8gPSB0eXBlb2YgZGVwcy5leHBvID09PSBcInN0cmluZ1wiO1xuICAgIGNvbnN0IGhhc1JOID0gdHlwZW9mIGRlcHNbXCJyZWFjdC1uYXRpdmVcIl0gPT09IFwic3RyaW5nXCI7XG4gICAgY29uc3QgaGFzQXBwQ29uZmlnID1cbiAgICAgIGZpbGVFeGlzdHMocGF0aC5qb2luKGRpciwgXCJhcHAuanNvblwiKSkgfHxcbiAgICAgIGZpbGVFeGlzdHMocGF0aC5qb2luKGRpciwgXCJhcHAuY29uZmlnLmpzXCIpKSB8fFxuICAgICAgZmlsZUV4aXN0cyhwYXRoLmpvaW4oZGlyLCBcImFwcC5jb25maWcudHNcIikpO1xuICAgIHJldHVybiAoaGFzRXhwbyB8fCBoYXNSTikgJiYgaGFzQXBwQ29uZmlnO1xuICB9O1xuXG4gIGZvciAoY29uc3QgYyBvZiBjYW5kaWRhdGVzKSB7XG4gICAgaWYgKGxvb2tzTGlrZUV4cG8oYykpIHJldHVybiBjO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBleHBvV2ViSW5kZXhQYXRoKGV4cG9Sb290OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgZDEgPSBwYXRoLmpvaW4oZXhwb1Jvb3QsIFwiZGlzdFwiLCBcImluZGV4Lmh0bWxcIik7XG4gIGlmIChmaWxlRXhpc3RzKGQxKSkgcmV0dXJuIGQxO1xuXG4gIGNvbnN0IGQyID0gcGF0aC5qb2luKGV4cG9Sb290LCBcIndlYi1idWlsZFwiLCBcImluZGV4Lmh0bWxcIik7XG4gIGlmIChmaWxlRXhpc3RzKGQyKSkgcmV0dXJuIGQyO1xuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB0cnlFeHBvV2ViRXhwb3J0SWZQb3NzaWJsZShleHBvUm9vdDogc3RyaW5nKSB7XG4gIGlmIChleHBvV2ViSW5kZXhQYXRoKGV4cG9Sb290KSkgcmV0dXJuO1xuXG4gIGNvbnN0IHBrZyA9IHJlYWRKc29uSWZFeGlzdHMocGF0aC5qb2luKGV4cG9Sb290LCBcInBhY2thZ2UuanNvblwiKSk7XG4gIGlmICghcGtnKSByZXR1cm47XG5cbiAgY29uc3Qgc2NyaXB0cyA9IHBrZy5zY3JpcHRzIHx8IHt9O1xuICBjb25zdCBub2RlTW9kdWxlcyA9IHBhdGguam9pbihleHBvUm9vdCwgXCJub2RlX21vZHVsZXNcIik7XG5cbiAgY29uc3QgcnVuID0gKGNtZDogc3RyaW5nKSA9PiBleGVjU3luYyhjbWQsIHsgY3dkOiBleHBvUm9vdCwgc3RkaW86IFwiaWdub3JlXCIsIHRpbWVvdXQ6IDI0MF8wMDAgfSk7XG5cbiAgdHJ5IHtcbiAgICBpZiAoIWRpckV4aXN0cyhub2RlTW9kdWxlcykpIHtcbiAgICAgIGV4ZWNTeW5jKFwibnBtIGluc3RhbGxcIiwgeyBjd2Q6IGV4cG9Sb290LCBzdGRpbzogXCJpZ25vcmVcIiwgdGltZW91dDogMjQwXzAwMCB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmVmZXIgZXhwbGljaXQgc2NyaXB0cyBpZiBwcmVzZW50XG4gICAgaWYgKHR5cGVvZiBzY3JpcHRzW1wiZXhwb3J0OndlYlwiXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcnVuKFwibnBtIHJ1biBleHBvcnQ6d2ViXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmlwdHNbXCJidWlsZDp3ZWJcIl0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJ1bihcIm5wbSBydW4gYnVpbGQ6d2ViXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmlwdHNbXCJleHBvcnRcIl0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJ1bihcIm5wbSBydW4gZXhwb3J0XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIEV4cG8gQ0xJIGV4cG9ydFxuICAgIHJ1bihcIm5weCBleHBvIGV4cG9ydCAtLXBsYXRmb3JtIHdlYiAtLW91dHB1dC1kaXIgZGlzdFwiKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlIC0gc3RhdHVzIHdpbGwgcmV0dXJuIGVycm9yIGlmIHByZXZpZXcgc3RpbGwgbWlzc2luZ1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfSkge1xuICBjb25zdCBwcm9qZWN0SWQgPSBwYXJhbXMuaWQ7XG4gIGVuc3VyZURpcnMocHJvamVjdElkKTtcblxuICBjb25zdCByb290ID0gY3VycmVudERpcihwcm9qZWN0SWQpO1xuICBjb25zdCBtZXRhID0gcmVhZE1ldGEocHJvamVjdElkKTtcblxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICBjb25zdCByZXF1ZXN0ZWQgPSBzYWZlVHJpbSh1cmwuc2VhcmNoUGFyYW1zLmdldChcInBsYXRmb3JtXCIpKS50b0xvd2VyQ2FzZSgpO1xuXG4gIGNvbnN0IGJ1aWxkUGxhdGZvcm06IFBsYXRmb3JtID0gKG1ldGE/LmJ1aWxkSW5mbz8ucGxhdGZvcm0gfHwgXCJ3ZWJcIikgYXMgUGxhdGZvcm07XG5cbiAgLy8gVUkgbWF5IHJlcXVlc3QgaW9zL2FuZHJvaWQgZm9yIGZyYW1pbmcgZXZlbiBpZiB0aGUgdW5kZXJseWluZyBwcmV2aWV3IGlzIHdlYi1leHBvcnRlZC5cbiAgY29uc3QgcGxhdGZvcm06IFBsYXRmb3JtID1cbiAgICByZXF1ZXN0ZWQgPT09IFwid2ViXCIgfHwgcmVxdWVzdGVkID09PSBcImlvc1wiIHx8IHJlcXVlc3RlZCA9PT0gXCJhbmRyb2lkXCIgfHwgcmVxdWVzdGVkID09PSBcImlvc19hbmRyb2lkXCJcbiAgICAgID8gKHJlcXVlc3RlZCBhcyBQbGF0Zm9ybSlcbiAgICAgIDogYnVpbGRQbGF0Zm9ybTtcblxuICBpZiAoIW1ldGE/LmJ1aWx0KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3RhdGU6IFwibG9hZGluZ1wiIGFzIFByZXZpZXdTdGF0ZSwgbWVzc2FnZTogXCJQcm9qZWN0IG5vdCBidWlsdCB5ZXRcIiB9KTtcbiAgfVxuXG4gIC8vIFdFQlxuICBpZiAocGxhdGZvcm0gPT09IFwid2ViXCIpIHtcbiAgICAvLyBJZiBzdGF0aWMgcHJldmlldyBidW5kbGUgZXhpc3RzLCB3ZSBhcmUgcnVubmluZy5cbiAgICBpZiAod2ViUHJldmlld0luZGV4UGF0aChyb290KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3RhdGU6IFwicnVubmluZ1wiIGFzIFByZXZpZXdTdGF0ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBBdHRlbXB0IFZpdGUgYnVpbGRzIChzYWZlLCBub24tbmV4dGpzKS5cbiAgICB0cnlCdWlsZFZpdGVJZlBvc3NpYmxlKHBhdGguam9pbihyb290LCBcImFwcHNcIiwgXCJ3ZWJcIikpO1xuICAgIHRyeUJ1aWxkVml0ZUlmUG9zc2libGUocm9vdCk7XG4gICAgdHJ5QnVpbGRWaXRlSWZQb3NzaWJsZShwYXRoLmpvaW4ocm9vdCwgXCJmcm9udGVuZFwiKSk7XG5cbiAgICBpZiAod2ViUHJldmlld0luZGV4UGF0aChyb290KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3RhdGU6IFwicnVubmluZ1wiIGFzIFByZXZpZXdTdGF0ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgTmV4dC5qcyBwcm9qZWN0LCB3ZSBjYW4gc3RpbGwgcHJvdmlkZSBhIGxpdmUgcHJldmlldyBieSBzdGFydGluZyBhIGxvY2FsIE5leHQgZGV2IHNlcnZlclxuICAgIC8vIGFuZCBwcm94eWluZyBpdCB0aHJvdWdoIC9wcmV2aWV3LzppZC9uZXh0LypcbiAgICBpZiAoaXNOZXh0SnNQcm9qZWN0KHJvb3QpKSB7XG4gICAgICBjb25zdCBzdGFydGVkID0gYXdhaXQgZW5zdXJlTmV4dERldlNlcnZlcihyb290LCBwcm9qZWN0SWQpO1xuICAgICAgaWYgKHN0YXJ0ZWQub2spIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdGF0ZTogXCJydW5uaW5nXCIgYXMgUHJldmlld1N0YXRlLFxuICAgICAgICAgIG1vZGU6IFwibmV4dC1kZXZcIixcbiAgICAgICAgICBuZXh0UG9ydDogc3RhcnRlZC5wb3J0LFxuICAgICAgICAgIGRpcmVjdFVybDogc3RhcnRlZC5iYXNlVXJsLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN0YXRlOiBcImVycm9yXCIgYXMgUHJldmlld1N0YXRlLFxuICAgICAgICBtZXNzYWdlOiBcIk5leHQuanMgcHJldmlldyBmYWlsZWQgdG8gc3RhcnQuXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3RhdGU6IFwiZXJyb3JcIiBhcyBQcmV2aWV3U3RhdGUsXG4gICAgICBtZXNzYWdlOiBcIldlYiBwcmV2aWV3IG5vdCBmb3VuZCAocHJldmlldyBvdXRwdXQgbWlzc2luZykuXCIsXG4gICAgfSk7XG4gIH1cblxuICAvLyBNT0JJTEUgKEV4cG8vc2hhcmVkX21vYmlsZSBvbmx5OyBkZWxpdmVyZWQgdmlhIHdlYiBleHBvcnQpXG4gIGNvbnN0IGZyYW1ld29yayA9IG1ldGE/LmJ1aWxkSW5mbz8uZnJhbWV3b3JrIHx8IFwiXCI7XG4gIGlmIChmcmFtZXdvcmsgIT09IFwic2hhcmVkX21vYmlsZVwiKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN0YXRlOiBcImVycm9yXCIgYXMgUHJldmlld1N0YXRlLFxuICAgICAgbWVzc2FnZTogXCJNb2JpbGUgcHJldmlldyBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgRXhwby9zaGFyZWRfbW9iaWxlIHByb2plY3RzIGluIHRoaXMgdmVyc2lvbi5cIixcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGV4cG9Sb290ID0gZmluZEV4cG9Sb290KHJvb3QpO1xuICBpZiAoIWV4cG9Sb290KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN0YXRlOiBcImVycm9yXCIgYXMgUHJldmlld1N0YXRlLFxuICAgICAgbWVzc2FnZTogXCJDb3VsZCBub3QgbG9jYXRlIGFuIEV4cG8gcHJvamVjdCBpbiB0aGUgc2FuZGJveC5cIixcbiAgICB9KTtcbiAgfVxuXG4gIHRyeUV4cG9XZWJFeHBvcnRJZlBvc3NpYmxlKGV4cG9Sb290KTtcblxuICBjb25zdCBpZHggPSBleHBvV2ViSW5kZXhQYXRoKGV4cG9Sb290KTtcbiAgaWYgKGlkeCkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN0YXRlOiBcInJ1bm5pbmdcIiBhcyBQcmV2aWV3U3RhdGUgfSk7XG4gIH1cblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIHN0YXRlOiBcImVycm9yXCIgYXMgUHJldmlld1N0YXRlLFxuICAgIG1lc3NhZ2U6IFwiRXhwbyB3ZWIgcHJldmlldyBub3QgZm91bmQgKGV4cG9ydCBvdXRwdXQgbWlzc2luZykuXCIsXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbInJ1bnRpbWUiLCJOZXh0UmVzcG9uc2UiLCJmcyIsInBhdGgiLCJleGVjU3luYyIsInNwYXduIiwiZW5zdXJlRGlycyIsImN1cnJlbnREaXIiLCJyZWFkTWV0YSIsInNhZmVUcmltIiwidiIsInRyaW0iLCJmaWxlRXhpc3RzIiwicCIsImV4aXN0c1N5bmMiLCJzdGF0U3luYyIsImlzRmlsZSIsImRpckV4aXN0cyIsImlzRGlyZWN0b3J5IiwicmVhZEpzb25JZkV4aXN0cyIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsIndlYlByZXZpZXdJbmRleFBhdGgiLCJyb290IiwicDEiLCJqb2luIiwicDIiLCJwMyIsInA0IiwiaXNOZXh0SnNQcm9qZWN0IiwicGtnIiwiZGVwcyIsImRlcGVuZGVuY2llcyIsImRldkRlcGVuZGVuY2llcyIsIm5leHQiLCJwcmV2aWV3UG9ydCIsInByb2plY3RJZCIsIm4iLCJwYXJzZUludCIsImJhc2UiLCJvZmZzZXQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIndhaXRGb3JIdHRwIiwidXJsIiwibXNUb3RhbCIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsInIiLCJmZXRjaCIsImNhY2hlIiwib2siLCJzdGF0dXMiLCJQcm9taXNlIiwicmVzIiwic2V0VGltZW91dCIsImVuc3VyZU5leHREZXZTZXJ2ZXIiLCJwb3J0IiwiYmFzZVVybCIsInJ1bm5pbmciLCJub2RlTW9kdWxlcyIsImN3ZCIsInN0ZGlvIiwidGltZW91dCIsImNoaWxkIiwicHJvY2VzcyIsInBsYXRmb3JtIiwiU3RyaW5nIiwiZGV0YWNoZWQiLCJlbnYiLCJQT1JUIiwiSE9TVE5BTUUiLCJIT1NUIiwidW5yZWYiLCJ0cnlCdWlsZFZpdGVJZlBvc3NpYmxlIiwiYXBwUm9vdCIsImRpc3RJbmRleCIsInNjcmlwdHMiLCJidWlsZCIsImZpbmRFeHBvUm9vdCIsImNhbmRpZGF0ZXMiLCJlbnRyaWVzIiwicmVhZGRpclN5bmMiLCJ3aXRoRmlsZVR5cGVzIiwiZSIsInB1c2giLCJuYW1lIiwibG9va3NMaWtlRXhwbyIsImRpciIsImhhc0V4cG8iLCJleHBvIiwiaGFzUk4iLCJoYXNBcHBDb25maWciLCJjIiwiZXhwb1dlYkluZGV4UGF0aCIsImV4cG9Sb290IiwiZDEiLCJkMiIsInRyeUV4cG9XZWJFeHBvcnRJZlBvc3NpYmxlIiwicnVuIiwiY21kIiwiR0VUIiwicmVxIiwicGFyYW1zIiwiaWQiLCJtZXRhIiwiVVJMIiwicmVxdWVzdGVkIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwidG9Mb3dlckNhc2UiLCJidWlsZFBsYXRmb3JtIiwiYnVpbGRJbmZvIiwiYnVpbHQiLCJqc29uIiwic3RhdGUiLCJtZXNzYWdlIiwic3RhcnRlZCIsIm1vZGUiLCJuZXh0UG9ydCIsImRpcmVjdFVybCIsImZyYW1ld29yayIsImlkeCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/project/[id]/preview/status/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sandbox/meta.ts":
/*!*****************************!*\
  !*** ./lib/sandbox/meta.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   readMeta: () => (/* binding */ readMeta),\n/* harmony export */   readProjectMeta: () => (/* binding */ readProjectMeta),\n/* harmony export */   writeMeta: () => (/* binding */ writeMeta),\n/* harmony export */   writeProjectMeta: () => (/* binding */ writeProjectMeta)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n// lib/sandbox/meta.ts\n\n\nfunction projectsRoot() {\n    return path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"sandbox\", \"projects\");\n}\nfunction projectDir(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_1___default().join(projectsRoot(), projectId);\n}\nfunction metaPath(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_1___default().join(projectDir(projectId), \"meta.json\");\n}\nfunction ensureProjectDir(projectId) {\n    const dir = projectDir(projectId);\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dir)) fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n        recursive: true\n    });\n}\nfunction nowIso() {\n    return new Date().toISOString();\n}\nfunction readMeta(projectId) {\n    try {\n        const p = metaPath(projectId);\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(p)) return null;\n        const raw = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(p, \"utf-8\");\n        return JSON.parse(raw);\n    } catch  {\n        return null;\n    }\n}\nfunction writeMeta(projectId, patch) {\n    ensureProjectDir(projectId);\n    const prev = readMeta(projectId);\n    const base = prev ?? {\n        id: projectId,\n        createdAt: nowIso(),\n        updatedAt: nowIso()\n    };\n    const next = {\n        ...base,\n        ...patch,\n        id: projectId,\n        updatedAt: nowIso()\n    };\n    fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(metaPath(projectId), JSON.stringify(next, null, 2), \"utf-8\");\n    return next;\n}\nconst readProjectMeta = readMeta;\nconst writeProjectMeta = writeMeta;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2FuZGJveC9tZXRhLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsc0JBQXNCO0FBQ0Y7QUFDSTtBQXdDeEIsU0FBU0U7SUFDUCxPQUFPRCxnREFBUyxDQUFDRyxRQUFRQyxHQUFHLElBQUksV0FBVztBQUM3QztBQUVBLFNBQVNDLFdBQVdDLFNBQWlCO0lBQ25DLE9BQU9OLGdEQUFTLENBQUNDLGdCQUFnQks7QUFDbkM7QUFFQSxTQUFTQyxTQUFTRCxTQUFpQjtJQUNqQyxPQUFPTixnREFBUyxDQUFDSyxXQUFXQyxZQUFZO0FBQzFDO0FBRUEsU0FBU0UsaUJBQWlCRixTQUFpQjtJQUN6QyxNQUFNRyxNQUFNSixXQUFXQztJQUN2QixJQUFJLENBQUNQLG9EQUFhLENBQUNVLE1BQU1WLG1EQUFZLENBQUNVLEtBQUs7UUFBRUcsV0FBVztJQUFLO0FBQy9EO0FBRUEsU0FBU0M7SUFDUCxPQUFPLElBQUlDLE9BQU9DLFdBQVc7QUFDL0I7QUFFTyxTQUFTQyxTQUFTVixTQUFpQjtJQUN4QyxJQUFJO1FBQ0YsTUFBTVcsSUFBSVYsU0FBU0Q7UUFDbkIsSUFBSSxDQUFDUCxvREFBYSxDQUFDa0IsSUFBSSxPQUFPO1FBQzlCLE1BQU1DLE1BQU1uQixzREFBZSxDQUFDa0IsR0FBRztRQUMvQixPQUFPRyxLQUFLQyxLQUFLLENBQUNIO0lBQ3BCLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sU0FBU0ksVUFBVWhCLFNBQWlCLEVBQUVpQixLQUEyQjtJQUN0RWYsaUJBQWlCRjtJQUVqQixNQUFNa0IsT0FBT1IsU0FBU1Y7SUFDdEIsTUFBTW1CLE9BQW9CRCxRQUFRO1FBQ2hDRSxJQUFJcEI7UUFDSnFCLFdBQVdkO1FBQ1hlLFdBQVdmO0lBQ2I7SUFFQSxNQUFNZ0IsT0FBb0I7UUFDeEIsR0FBR0osSUFBSTtRQUNQLEdBQUdGLEtBQUs7UUFDUkcsSUFBSXBCO1FBQ0pzQixXQUFXZjtJQUNiO0lBRUFkLHVEQUFnQixDQUFDUSxTQUFTRCxZQUFZYyxLQUFLVyxTQUFTLENBQUNGLE1BQU0sTUFBTSxJQUFJO0lBQ3JFLE9BQU9BO0FBQ1Q7QUFFTyxNQUFNRyxrQkFBa0JoQixTQUFTO0FBQ2pDLE1BQU1pQixtQkFBbUJYLFVBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaWNvbGxvLXYxLy4vbGliL3NhbmRib3gvbWV0YS50cz81NmE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9zYW5kYm94L21ldGEudHNcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCB0eXBlIFByb2plY3RNZXRhID0ge1xuICBpZDogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XG5cbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuXG4gIGVudHJ5Pzogc3RyaW5nO1xuICBmaWxlTGlzdD86IHN0cmluZ1tdO1xuICBsYXN0QnVpbGRBdD86IHN0cmluZztcbiAgbGFzdEJ1aWxkT2s/OiBib29sZWFuO1xuXG4gIGluaXRpYWxpemVkPzogYm9vbGVhbjtcbiAgYnVpbHQ/OiBib29sZWFuO1xuICB2ZXJzaW9uPzogbnVtYmVyO1xuICBmaWxlcz86IHN0cmluZ1tdO1xuXG4gIG1lbW9yeT86IHN0cmluZztcblxuICBwZW5kaW5nUGxhdGZvcm1Qcm9tcHQ/OiBzdHJpbmc7XG5cbiAgYnVpbGRJbmZvPzoge1xuICAgIHBsYXRmb3JtOiBcIndlYlwiIHwgXCJpb3NcIiB8IFwiYW5kcm9pZFwiIHwgXCJpb3NfYW5kcm9pZFwiO1xuICAgIGZyYW1ld29yazogXCJuZXh0anNcIiB8IFwic2hhcmVkX21vYmlsZVwiIHwgXCJzd2lmdFwiIHwgXCJrb3RsaW5cIjtcbiAgICBsYW5ndWFnZTogXCJqYXZhc2NyaXB0XCIgfCBcInR5cGVzY3JpcHRcIiB8IFwic3dpZnRcIiB8IFwia290bGluXCI7XG4gICAgYXBwTmFtZTogc3RyaW5nO1xuICAgIG9uZUxpbmVyOiBzdHJpbmc7XG4gICAgY29yZUZlYXR1cmVzOiBzdHJpbmdbXTtcbiAgfTtcblxuICAvLyDinIUgQWRkZWQ6IHByZXZpZXcgcnVudGltZSBpbmZvXG4gIHByZXZpZXc/OiB7XG4gICAgbmV4dFBvcnQ/OiBudW1iZXI7XG4gICAgbmV4dFN0YXJ0ZWRBdD86IG51bWJlcjtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIHByb2plY3RzUm9vdCgpIHtcbiAgcmV0dXJuIHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcInNhbmRib3hcIiwgXCJwcm9qZWN0c1wiKTtcbn1cblxuZnVuY3Rpb24gcHJvamVjdERpcihwcm9qZWN0SWQ6IHN0cmluZykge1xuICByZXR1cm4gcGF0aC5qb2luKHByb2plY3RzUm9vdCgpLCBwcm9qZWN0SWQpO1xufVxuXG5mdW5jdGlvbiBtZXRhUGF0aChwcm9qZWN0SWQ6IHN0cmluZykge1xuICByZXR1cm4gcGF0aC5qb2luKHByb2plY3REaXIocHJvamVjdElkKSwgXCJtZXRhLmpzb25cIik7XG59XG5cbmZ1bmN0aW9uIGVuc3VyZVByb2plY3REaXIocHJvamVjdElkOiBzdHJpbmcpIHtcbiAgY29uc3QgZGlyID0gcHJvamVjdERpcihwcm9qZWN0SWQpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG59XG5cbmZ1bmN0aW9uIG5vd0lzbygpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRNZXRhKHByb2plY3RJZDogc3RyaW5nKTogUHJvamVjdE1ldGEgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwID0gbWV0YVBhdGgocHJvamVjdElkKTtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMocCkpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHJhdyA9IGZzLnJlYWRGaWxlU3luYyhwLCBcInV0Zi04XCIpO1xuICAgIHJldHVybiBKU09OLnBhcnNlKHJhdykgYXMgUHJvamVjdE1ldGE7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZU1ldGEocHJvamVjdElkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPFByb2plY3RNZXRhPik6IFByb2plY3RNZXRhIHtcbiAgZW5zdXJlUHJvamVjdERpcihwcm9qZWN0SWQpO1xuXG4gIGNvbnN0IHByZXYgPSByZWFkTWV0YShwcm9qZWN0SWQpO1xuICBjb25zdCBiYXNlOiBQcm9qZWN0TWV0YSA9IHByZXYgPz8ge1xuICAgIGlkOiBwcm9qZWN0SWQsXG4gICAgY3JlYXRlZEF0OiBub3dJc28oKSxcbiAgICB1cGRhdGVkQXQ6IG5vd0lzbygpLFxuICB9O1xuXG4gIGNvbnN0IG5leHQ6IFByb2plY3RNZXRhID0ge1xuICAgIC4uLmJhc2UsXG4gICAgLi4ucGF0Y2gsXG4gICAgaWQ6IHByb2plY3RJZCxcbiAgICB1cGRhdGVkQXQ6IG5vd0lzbygpLFxuICB9O1xuXG4gIGZzLndyaXRlRmlsZVN5bmMobWV0YVBhdGgocHJvamVjdElkKSwgSlNPTi5zdHJpbmdpZnkobmV4dCwgbnVsbCwgMiksIFwidXRmLThcIik7XG4gIHJldHVybiBuZXh0O1xufVxuXG5leHBvcnQgY29uc3QgcmVhZFByb2plY3RNZXRhID0gcmVhZE1ldGE7XG5leHBvcnQgY29uc3Qgd3JpdGVQcm9qZWN0TWV0YSA9IHdyaXRlTWV0YTtcbiJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJwcm9qZWN0c1Jvb3QiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInByb2plY3REaXIiLCJwcm9qZWN0SWQiLCJtZXRhUGF0aCIsImVuc3VyZVByb2plY3REaXIiLCJkaXIiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibm93SXNvIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicmVhZE1ldGEiLCJwIiwicmF3IiwicmVhZEZpbGVTeW5jIiwiSlNPTiIsInBhcnNlIiwid3JpdGVNZXRhIiwicGF0Y2giLCJwcmV2IiwiYmFzZSIsImlkIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibmV4dCIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJyZWFkUHJvamVjdE1ldGEiLCJ3cml0ZVByb2plY3RNZXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/sandbox/meta.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sandbox/paths.ts":
/*!******************************!*\
  !*** ./lib/sandbox/paths.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   currentDir: () => (/* binding */ currentDir),\n/* harmony export */   ensureDirs: () => (/* binding */ ensureDirs),\n/* harmony export */   projectRoot: () => (/* binding */ projectRoot),\n/* harmony export */   stagingDir: () => (/* binding */ stagingDir),\n/* harmony export */   templateDir: () => (/* binding */ templateDir),\n/* harmony export */   versionsDir: () => (/* binding */ versionsDir)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction projectRoot(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \"sandbox\", \"projects\", projectId);\n}\nfunction currentDir(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_0___default().join(projectRoot(projectId), \"current\");\n}\nfunction versionsDir(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_0___default().join(projectRoot(projectId), \"versions\");\n}\nfunction stagingDir(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_0___default().join(projectRoot(projectId), \"staging\");\n}\nfunction templateDir(projectId) {\n    return path__WEBPACK_IMPORTED_MODULE_0___default().join(projectRoot(projectId), \"template\");\n}\nfunction ensureDirs(projectId) {\n    const root = projectRoot(projectId);\n    const cur = currentDir(projectId);\n    const vers = versionsDir(projectId);\n    const staging = stagingDir(projectId);\n    const tmpl = templateDir(projectId);\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(root)) fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(root, {\n        recursive: true\n    });\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(cur)) fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(cur, {\n        recursive: true\n    });\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(tmpl)) fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(tmpl, {\n        recursive: true\n    });\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(vers)) fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(vers, {\n        recursive: true\n    });\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(staging)) fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(staging, {\n        recursive: true\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2FuZGJveC9wYXRocy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0o7QUFFYixTQUFTRSxZQUFZQyxTQUFpQjtJQUMzQyxPQUFPSCxnREFBUyxDQUFDSyxRQUFRQyxHQUFHLElBQUksV0FBVyxZQUFZSDtBQUN6RDtBQUNPLFNBQVNJLFdBQVdKLFNBQWlCO0lBQzFDLE9BQU9ILGdEQUFTLENBQUNFLFlBQVlDLFlBQVk7QUFDM0M7QUFDTyxTQUFTSyxZQUFZTCxTQUFpQjtJQUMzQyxPQUFPSCxnREFBUyxDQUFDRSxZQUFZQyxZQUFZO0FBQzNDO0FBQ08sU0FBU00sV0FBV04sU0FBaUI7SUFDMUMsT0FBT0gsZ0RBQVMsQ0FBQ0UsWUFBWUMsWUFBWTtBQUMzQztBQUVPLFNBQVNPLFlBQVlQLFNBQWlCO0lBQzNDLE9BQU9ILGdEQUFTLENBQUNFLFlBQVlDLFlBQVk7QUFDM0M7QUFFTyxTQUFTUSxXQUFXUixTQUFpQjtJQUMxQyxNQUFNUyxPQUFPVixZQUFZQztJQUN6QixNQUFNVSxNQUFNTixXQUFXSjtJQUN2QixNQUFNVyxPQUFPTixZQUFZTDtJQUN6QixNQUFNWSxVQUFVTixXQUFXTjtJQUMzQixNQUFNYSxPQUFPTixZQUFZUDtJQUN6QixJQUFJLENBQUNGLG9EQUFhLENBQUNXLE9BQU9YLG1EQUFZLENBQUNXLE1BQU07UUFBRU8sV0FBVztJQUFLO0lBQy9ELElBQUksQ0FBQ2xCLG9EQUFhLENBQUNZLE1BQU1aLG1EQUFZLENBQUNZLEtBQUs7UUFBRU0sV0FBVztJQUFLO0lBQzdELElBQUksQ0FBQ2xCLG9EQUFhLENBQUNlLE9BQU9mLG1EQUFZLENBQUNlLE1BQU07UUFBRUcsV0FBVztJQUFLO0lBQy9ELElBQUksQ0FBQ2xCLG9EQUFhLENBQUNhLE9BQU9iLG1EQUFZLENBQUNhLE1BQU07UUFBRUssV0FBVztJQUFLO0lBQy9ELElBQUksQ0FBQ2xCLG9EQUFhLENBQUNjLFVBQVVkLG1EQUFZLENBQUNjLFNBQVM7UUFBRUksV0FBVztJQUFLO0FBQ3ZFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmljb2xsby12MS8uL2xpYi9zYW5kYm94L3BhdGhzLnRzPzRhM2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3RSb290KHByb2plY3RJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJzYW5kYm94XCIsIFwicHJvamVjdHNcIiwgcHJvamVjdElkKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50RGlyKHByb2plY3RJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwYXRoLmpvaW4ocHJvamVjdFJvb3QocHJvamVjdElkKSwgXCJjdXJyZW50XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZlcnNpb25zRGlyKHByb2plY3RJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwYXRoLmpvaW4ocHJvamVjdFJvb3QocHJvamVjdElkKSwgXCJ2ZXJzaW9uc1wiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdGFnaW5nRGlyKHByb2plY3RJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwYXRoLmpvaW4ocHJvamVjdFJvb3QocHJvamVjdElkKSwgXCJzdGFnaW5nXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVEaXIocHJvamVjdElkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHBhdGguam9pbihwcm9qZWN0Um9vdChwcm9qZWN0SWQpLCBcInRlbXBsYXRlXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlRGlycyhwcm9qZWN0SWQ6IHN0cmluZykge1xuICBjb25zdCByb290ID0gcHJvamVjdFJvb3QocHJvamVjdElkKTtcbiAgY29uc3QgY3VyID0gY3VycmVudERpcihwcm9qZWN0SWQpO1xuICBjb25zdCB2ZXJzID0gdmVyc2lvbnNEaXIocHJvamVjdElkKTtcbiAgY29uc3Qgc3RhZ2luZyA9IHN0YWdpbmdEaXIocHJvamVjdElkKTtcbiAgY29uc3QgdG1wbCA9IHRlbXBsYXRlRGlyKHByb2plY3RJZCk7XG4gIGlmICghZnMuZXhpc3RzU3luYyhyb290KSkgZnMubWtkaXJTeW5jKHJvb3QsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoY3VyKSkgZnMubWtkaXJTeW5jKGN1ciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIGlmICghZnMuZXhpc3RzU3luYyh0bXBsKSkgZnMubWtkaXJTeW5jKHRtcGwsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICBpZiAoIWZzLmV4aXN0c1N5bmModmVycykpIGZzLm1rZGlyU3luYyh2ZXJzLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHN0YWdpbmcpKSBmcy5ta2RpclN5bmMoc3RhZ2luZywgeyByZWN1cnNpdmU6IHRydWUgfSk7XG59XG4iXSwibmFtZXMiOlsicGF0aCIsImZzIiwicHJvamVjdFJvb3QiLCJwcm9qZWN0SWQiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImN1cnJlbnREaXIiLCJ2ZXJzaW9uc0RpciIsInN0YWdpbmdEaXIiLCJ0ZW1wbGF0ZURpciIsImVuc3VyZURpcnMiLCJyb290IiwiY3VyIiwidmVycyIsInN0YWdpbmciLCJ0bXBsIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/sandbox/paths.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&page=%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject%2F%5Bid%5D%2Fpreview%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadhiththyagarajan%2FDesktop%2FNicollo%2Fnicollo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();